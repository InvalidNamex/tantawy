{% extends 'authentication/base.html' %}

{% block title %}Dashboard - Tantawy Management System{% endblock %}

{% block content %}
<!-- Welcome Section -->
<div class="row">
    <div class="col-12">
        <div class="jumbotron bg-primary text-white p-5 rounded shadow" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;">
            <h1 class="display-4">
                <i class="bi bi-house"></i> Welcome, {{ user.get_full_name|default:user.username }}!
            </h1>
            <p class="lead">
                Tantawy Management System Dashboard - Your central hub for inventory and store management.
            </p>
            <hr class="my-4" style="border-color: rgba(255,255,255,0.3);">
            <p>
                <i class="bi bi-calendar"></i> Last login: 
                {% if user.last_login %}
                    {{ user.last_login|date:"F j, Y g:i A" }}
                {% else %}
                    First time login
                {% endif %}
            </p>
        </div>
    </div>
</div>

<!-- Quick Stats Cards -->
<div class="row mt-4">
    <div class="col-md-3 mb-3">
        <div class="card border-primary h-100">
            <div class="card-body text-center">
                <i class="bi bi-collection display-4 text-primary"></i>
                <h5 class="card-title mt-2">Items Groups</h5>
                <p class="card-text display-6 text-primary">{{ items_groups_count }}</p>
                <a href="/core/items-groups/" class="btn btn-outline-primary btn-sm">
                    <i class="bi bi-eye"></i> View All
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="card border-success h-100">
            <div class="card-body text-center">
                <i class="bi bi-box display-4 text-success"></i>
                <h5 class="card-title mt-2">Items</h5>
                <p class="card-text display-6 text-success">{{ items_count }}</p>
                <a href="/core/items/" class="btn btn-outline-success btn-sm">
                    <i class="bi bi-eye"></i> View All
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="card border-warning h-100">
            <div class="card-body text-center">
                <i class="bi bi-currency-dollar display-4 text-warning"></i>
                <h5 class="card-title mt-2">Price Lists</h5>
                <p class="card-text display-6 text-warning">{{ price_lists_count }}</p>
                <a href="/core/price-lists/" class="btn btn-outline-warning btn-sm">
                    <i class="bi bi-eye"></i> View All
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="card border-info h-100">
            <div class="card-body text-center">
                <i class="bi bi-shop display-4 text-info"></i>
                <h5 class="card-title mt-2">Stores</h5>
                <p class="card-text display-6 text-info">{{ stores_count }}</p>
                <a href="/core/stores/" class="btn btn-outline-info btn-sm">
                    <i class="bi bi-eye"></i> View All
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="bi bi-lightning"></i> Quick Actions
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h6><i class="bi bi-plus-circle"></i> Create New</h6>
                        <div class="btn-group-vertical d-grid gap-2" role="group">
                            <a href="/admin/core/itemsgroup/add/" class="btn btn-outline-primary">
                                <i class="bi bi-plus"></i> Add Items Group
                            </a>
                            <a href="/admin/core/item/add/" class="btn btn-outline-success">
                                <i class="bi bi-plus"></i> Add Item
                            </a>
                            <a href="/admin/core/pricelist/add/" class="btn btn-outline-warning">
                                <i class="bi bi-plus"></i> Add Price List
                            </a>
                            <a href="/admin/core/store/add/" class="btn btn-outline-info">
                                <i class="bi bi-plus"></i> Add Store
                            </a>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <h6><i class="bi bi-gear"></i> Management</h6>
                        <div class="btn-group-vertical d-grid gap-2" role="group">
                            <a href="/admin/" class="btn btn-outline-dark">
                                <i class="bi bi-gear"></i> Admin Panel
                            </a>
                            <a href="/api/schema/swagger-ui/" class="btn btn-outline-secondary" target="_blank">
                                <i class="bi bi-file-code"></i> API Documentation
                            </a>
                            <a href="/api/schema/redoc/" class="btn btn-outline-secondary" target="_blank">
                                <i class="bi bi-file-text"></i> API Reference
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- User Information -->
<div class="row mt-4">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="bi bi-person-badge"></i> User Information
                </h5>
            </div>
            <div class="card-body">
                <table class="table table-borderless">
                    <tr>
                        <td><strong>Username:</strong></td>
                        <td>{{ user.username }}</td>
                    </tr>
                    <tr>
                        <td><strong>Email:</strong></td>
                        <td>{{ user.email|default:"Not provided" }}</td>
                    </tr>
                    <tr>
                        <td><strong>Full Name:</strong></td>
                        <td>{{ user.get_full_name|default:"Not provided" }}</td>
                    </tr>
                    <tr>
                        <td><strong>Staff Status:</strong></td>
                        <td>
                            {% if user.is_staff %}
                                <span class="badge bg-success">Staff Member</span>
                            {% else %}
                                <span class="badge bg-secondary">Regular User</span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Superuser:</strong></td>
                        <td>
                            {% if user.is_superuser %}
                                <span class="badge bg-danger">Yes</span>
                            {% else %}
                                <span class="badge bg-secondary">No</span>
                            {% endif %}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="bi bi-activity"></i> System Status
                </h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-6">
                        <div class="text-success">
                            <i class="bi bi-check-circle display-6"></i>
                            <h6 class="mt-2">Database</h6>
                            <small>Online</small>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="text-success">
                            <i class="bi bi-wifi display-6"></i>
                            <h6 class="mt-2">API</h6>
                            <small>Available</small>
                        </div>
                    </div>
                </div>
                <hr>
                <p class="text-center mb-0">
                    <small class="text-muted">
                        <i class="bi bi-server"></i> Server Time: {% now "F j, Y g:i A T" %}
                    </small>
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}